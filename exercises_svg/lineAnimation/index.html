<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="main.css">
</head>
<body>

    <div class="line-container">

        <svg version="1.1" id="Layer_1" x="0px" y="0px"
            viewBox="0 0 595.3 841.9" style="enable-background:new 0 0 595.3 841.9;" xml:space="preserve" preserveAspectRatio="xMidYMax meet">
        <style type="text/css">
            .st0{fill:none;stroke:#BE1622;stroke-miterlimit:10;}
        </style>
        <path class="st0" d="M296.6,0c0,32.9,0,65.9,0,98.8c36.3,11.2,62.4,21.3,61.4,27.2c-2.4,13.2-142.3-1.8-142.8,3
            c-0.5,4.8,138.2,18.8,137.8,32.2c-0.3,11-93.6,14.3-93.5,23.1c0.1,9.1,99.6,12.8,99.6,20.1c0,8.1-123.7,12.1-123.7,19.1
            c0,7.2,129.5,9.4,129.8,19.1c0.1,4.3-24.9,8.8-60.3,13.1c-0.7,26.5-1.3,53-2,79.5c55.8,7.6,91.8,14.6,91.5,20.1
            c-0.6,11.2-149.8,12-149.9,19.1c0,6.2,115.1,4.7,117.7,24.1c2.7,20.3-118.9,52.5-116.7,60.3c1.5,5.4,59.3-8.9,62.4,0
            c3.2,9.1-54.1,33.7-51.3,41.2c3.4,9.3,92.6-17.1,94.5-11.1c2.3,6.9-114.9,46.5-111.6,59.3c1.6,6.3,32.3,4.7,76.4-1
            c-0.7,25.1-1.3,50.3-2,75.4c41.4,0.5,71.3,1.9,71.4,5c0.3,5.8-102.9,8.9-104.6,27.2c-1.8,18.4,100.5,38,98.6,49.3
            c-2.2,13.1-142.6,1.8-142.8,5c-0.2,2.7,97.4,6.1,99.6,25.1c0.8,7.4-12.9,15.2-26.2,21.1c0.3,26.8,0.7,53.6,1,80.5"/>
        </svg>

    </div>

    <section class="one">
        <h1 class="scroll" data-rate=".4" data-direction="vertical">ocean stuff</h1>
    </section>

    <section class="two">
        <h1 class="scroll" data-rate=".2" data-direction="vertical">omg scroll</h1>
        <p>big watermark</p>
    </section>

    <script>

        let path = document.querySelector('path');
        let pathLength = path.getTotalLength();

        path.style.strokeDasharray = pathLength + ' ' + pathLength;

        path.style.strokeDashOffset= pathLength;

        window.addEventListener('scroll', () => {
            // what % down is it?
            var scrollPercentage = (document.documentElement.scrollTop + document.body.scrollTop) / (document.documentElement.scrollHeight - document.documentElement.clientHeight);  

            //length to offset the dashes
            var drawLength = pathLength * scrollPercentage;

            //draw in reverse
            path.style.strokeDashoffset = pathLength - drawLength;

            //additional

            const target = document.querySelectorAll('.scroll');

            var index = 0, length = target.length;
            for (index; index < length; index++) {
                var pos = window.pageYOffset * target[index].dataset.rate;

                if(target[index].dataset.direction === 'vertical') {
                    target[index].style.transform = 'translate3d(0px, '+pos+'px, 0px)';
                } else {
                    var posX = window.pageYOffset * target[index].dataset.ratex;
                    var posY = window.pageYOffset * target[index].dataset.ratey;

                    target[index].style.transform = 'translate3d('+posX+'px, '+posY+'px, 0px)';
                }
            }

        })

    </script>
    
</body>
</html>